<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ppwcode vernacular semantics EnumerationValue Demo</title>

  <link rel="stylesheet" href="lib/dojo/dojo/resources/dojo.css" />
  <link rel="stylesheet" href="lib/dojo/dijit/themes/claro/claro.css" />

  <script>
    var dojoConfig = {
      async: true,
      parseOnLoad: false,
      isDebug: true,
      has: {
        "dojo-firebug": false,
        "dojo-debug-messages": true,
        "mvc-bindings-log-api": false,
        "ppwcode-contracts-precondition": true
      },
      packages: [
        {name: "dojo", location: "../../../lib/dojo/dojo" },
        {name: "dijit", location: "../../../lib/dojo/dijit"},
        {name: "ppwcode-vernacular-semantics", location: "../../../semantics"},
        {name: "put-selector", location: "../../../lib/put-selector"},
        {name: "dgrid", location: "../../../lib/dgrid"},
        {name: "xstyle", location: "../../../lib/xstyle"},
        {name: "demo", location: "../../../demo" },
        {name: "demo-img", location: "../../../demo/img"}
      ]
    };
  </script>

  <script src="lib/dojo/dojo/dojo.js"></script>

  <script>
    require(["dojo/parser", "dijit/registry",
             "demo/boards/TrafficSign", "dijit/layout/ContentPane",
             "dojo/domReady!"],
      function (parser, registry, TrafficSign) {
        var parsePromise = parser.parse();
        parsePromise.then(
          function() {
            registry.byId("enumChoice").onEnumValueChanged = function(enumvalue) {
              if (enumvalue.enum.isValueOf(TrafficSign.MANDATORY)) {
                registry.byId("mandatory").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.PROHIBITORY)) {
                registry.byId("prohibitory").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.WARNING)) {
                registry.byId("warning").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.DIRECTION)) {
                registry.byId("direction").updateSymbols(enumvalue.enum);
              }
              else {
                var msg = "ERROR: not a known Enumeration type";
                console.error(msg);
                throw msg;
              }
            };
          },
          function (err) {
            console.error("Main content not parsed: " + (err.message || err));
          }
        );
      }
    );
  </script>

</head>

<body class="claro">

  <div id="mainPane" style="height: 100%;" data-dojo-type="dijit/layout/ContentPane">
    <p style="text-align: left;">Choose a sign</p>
    <div id="enumChoice" data-dojo-type="demo/combo/comboBoards"></div>

    <p style="text-align: center;">MANDATORY LIST: enum == TrafficSign.MANDATORY</p>
    <ul id="mandatory" data-dojo-type="demo/symbol/SymbolList"></ul>

    <p style="text-align: center;">PROHIBITORY LIST: enum == TrafficSign.PROHIBITORY</p>
    <ul id="prohibitory" data-dojo-type="demo/symbol/SymbolList"></ul>

    <p style="text-align: center;">WARNING LIST: enum == TrafficSign.WARNING</p>
    <ul id="warning" data-dojo-type="demo/symbol/SymbolList"></ul>

    <p style="text-align: center;"> DIRECTION LIST: enum == TrafficSign.DIRECTION</p>
    <ul id="direction" data-dojo-type="demo/symbol/SymbolList"></ul>
  </div>

</body>
</html>
