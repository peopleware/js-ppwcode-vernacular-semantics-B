<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ppwcode vernacular semantics EnumerationValue Demo</title>

  <link rel="stylesheet" href="lib/dojo/dojo/resources/dojo.css" />
  <link rel="stylesheet" href="lib/dojo/dijit/themes/claro/claro.css" />
  <link rel="stylesheet" href="demo/css/boardsDemo.css" />

  <script>
    var dojoConfig = {
      async: true,
      parseOnLoad: false,
      isDebug: true,
      has: {
        "dojo-firebug": false,
        "dojo-debug-messages": true,
        "mvc-bindings-log-api": false,
        "ppwcode-contracts-precondition": true
      },
      packages: [
        {name: "dojo", location: "../../../lib/dojo/dojo" },
        {name: "dijit", location: "../../../lib/dojo/dijit"},
        {name: "ppwcode-vernacular-semantics", location: "../../../semantics"},
        {name: "put-selector", location: "../../../lib/put-selector"},
        {name: "dgrid", location: "../../../lib/dgrid"},
        {name: "xstyle", location: "../../../lib/xstyle"},
        {name: "demo", location: "../../../demo" },
        {name: "demo-img", location: "../../../demo/img"}
      ]
    };
  </script>

  <script src="lib/dojo/dojo/dojo.js"></script>

  <script>
    require(["dojo/parser", "dijit/registry",
             "demo/boards/TrafficSign", "dijit/layout/ContentPane",
             "dojo/domReady!"],
      function (parser, registry, TrafficSign) {
        var parsePromise = parser.parse();
        parsePromise.then(
          function() {
            registry.byId("enumChoice").onEnumValueChanged = function(enumvalue) {
              if (enumvalue.enum.isValueOf(TrafficSign.MANDATORY)) {
                registry.byId("mandatory").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.PROHIBITORY)) {
                registry.byId("prohibitory").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.WARNING)) {
                registry.byId("warning").updateSymbols(enumvalue.enum);
              }
              else if (enumvalue.enum.isValueOf(TrafficSign.DIRECTION)) {
                registry.byId("direction").updateSymbols(enumvalue.enum);
              }
              else {
                var msg = "ERROR: not a known Enumeration type";
                console.error(msg);
                throw msg;
              }
            };
          },
          function (err) {
            console.error("Main content not parsed: " + (err.message || err));
          }
        );
      }
    );
  </script>

</head>

<body class="claro">

  <div id="mainPane" data-dojo-type="dijit/layout/ContentPane">
    <div class="boardsInput">
      <h2>Choose a sign</h2>
      <p class="demoInfo">
        The signs in the drop-down are traffic signs stored as an enumeration.
        On selection, the traffic sign will appear in the correct area below, depending on the type of traffic sign.
        Duplicates are not allowed, so selecting an already selected traffic sign will not result in added the sign to an area below.
      </p>
      <div id="enumChoice" data-dojo-type="demo/combo/comboBoards"></div>
    </div>
    <div class="boardsOutput">
      <h2 style="text-align: left;">Selected signs</h2>
      <dl id="mandatory" data-dojo-type="demo/symbol/SymbolList">
        <dt>MANDATORY LIST: enum == TrafficSign.MANDATORY</dt>
        <dd class="emptySelection">No traffic signs selected yet</dd>
      </dl>

      <dl id="prohibitory" data-dojo-type="demo/symbol/SymbolList">
        <dt>PROHIBITORY LIST: enum == TrafficSign.PROHIBITORY</dt>
        <dd class="emptySelection">No traffic signs selected yet</dd>
      </dl>

      <dl id="warning" data-dojo-type="demo/symbol/SymbolList">
        <dt>WARNING LIST: enum == TrafficSign.WARNING</dt>
        <dd class="emptySelection">No traffic signs selected yet</dd>
      </dl>

      <dl id="direction" data-dojo-type="demo/symbol/SymbolList">
        <dt> DIRECTION LIST: enum == TrafficSign.DIRECTION</dt>
        <dd class="emptySelection">No traffic signs selected yet</dd>
      </dl>
    </div>
  </div>

</body>
</html>
